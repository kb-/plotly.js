<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Plotly Tooltip</title>
    <script src="./dist/plotly.js"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
        }
        #plot {
            width: 100%;
            height: 600px;
        }
    </style>
</head>
<body>
    <h1>Plotly Tooltip</h1>
    <div id="plot"></div>
    <div id="heatmap-plot"></div>
    <script>
        document.addEventListener("DOMContentLoaded", function() {
        
            // Generate date and time values
            function generateDateTime(start, count) {
                let dates = [];
                let current = new Date(start);
                for (let i = 0; i < count; i++) {
                    dates.push(new Date(current));
                    current.setHours(current.getHours() + 7);
                }
                return dates;
            }
            
            // Generate random y-values
            function generateRandomYValues(count) {
                return Array.from({ length: count }, () => Math.random() * 20);
            }
            
            // Generate data points
            var xValues = generateDateTime('2024-04-01T12:00:00Z', 10);

            var trace1 = {
                name: 'Trace 1',
                x: generateDateTime('2024-04-01T12:00:00Z', 5),
                y: generateRandomYValues(5),
                type: 'scatter',
                tooltiptemplate: "%{fullData.name}<br>%{x|%H:%M:%S}<br>y: %{y:.2e}",
                tooltip: {
                    align: 'left',
                    arrowcolor: 'blue',
                    arrowhead: 2,
                    arrowsize: 1.2,
                    arrowwidth: 1,
                    font: {
                        color: 'red',
                        family: 'Arial',
                        size: 16
                    },
                    showarrow: true,
                    xanchor: 'left'
                }
            };

            var trace2 = {
                name: 'Trace 2',
                x: generateDateTime('2024-04-01T12:00:00Z', 5),
                y: generateRandomYValues(5),
                type: 'scatter',
                tooltiptemplate: "%{fullData.name}<br>%{x|%H:%M:%S}<br>y: %{y:.2e}",
            };
            
            var data = [trace1, trace2];
            
            var layout = {
                title: 'Try the tooltip button!'
            };
            
            // Generate heatmap data
            var x = Array.from({ length: 400 }, (_, i) => i / 40);
            var y = Array.from({ length: 400 }, (_, i) => i / 40);
            var z = Array.from({ length: 400 }, (_, i) => 
                Array.from({ length: 400 }, (_, j) => 
                    Math.sin(i / 40) * Math.cos(j / 40)
                )
            );

            var heatmapData = [{
                z: z,
                x: x,
                y: y,
                type: 'heatmap',
                colorscale: 'Viridis',
				tooltip: {
                    bgcolor: "rgba(255, 255, 255, 0.2)"
                },
                tooltiptemplate: "x: %{x:.2f},<br>y: %{y:.2f},<br>z: %{z:.3f}"
            }];
            

            var config = {
                editable: true,//editable is important to allow Tooltip drag-positionning and deletion
                modeBarButtonsToAdd: ['tooltip', 'hoverclosest', 'hovercompare', 'togglespikelines'],  // Add the tooltip button
                displaylogo: false,  // Optionally hide the Plotly logo
                displayModeBar: true  // Ensure the modebar is displayed
            };

            Plotly.newPlot('plot', data, layout, config);
            Plotly.newPlot('heatmap-plot', heatmapData, {}, config);
        });
    </script>
</body>
</html>
